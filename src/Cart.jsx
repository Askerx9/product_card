import * as React from "react";
import ReactDOM from "react-dom";
import { useEffect, useState } from "react";

export const Cart = () => {
  const [items, setItems] = useState(0);

  useEffect(() => {
    document.addEventListener("addToCart", addToCart);
  });

  const addToCart = () => {
    setItems(items + 1);
  };

  return (
    <>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        x={0}
        y={0}
        viewBox="0 0 466 512"
        xmlSpace="preserve"
      >
        <g
          id="bag_3"
          className={`cart__bags ${items >= 3 && "cart__bags--active"}`}
        >
          <path
            d="M387.1 89.9h-68.8c-8.3 0-15-6.7-15-15V49.4c0-27.2 22.2-49.4 49.4-49.4s49.4 22.2 49.4 49.4v25.5c0 8.3-6.8 15-15 15zm-53.9-20h38.9V49.4c0-10.7-8.7-19.4-19.4-19.4s-19.4 8.7-19.4 19.4l-.1 20.5z"
            fill="#29376d"
          />
          <path
            d="M431.9 242.9H277.1c-8.3 0-15-6.7-15-15V168v-.4-.4l5-92.4c.4-8 7-14.3 15-14.3h141.2c8 0 14.5 6.2 15 14.2l8.6 152.4c0 10-7 15.8-15 15.8z"
            fill="#ff645a"
          />
          <path
            d="M431.9 242.9H294.8V60.6h128.5c8 0 14.5 6.2 15 14.2l8.6 152.4c0 9.9-7 15.7-15 15.7z"
            fill="#ff3053"
          />
        </g>
        <path
          d="M294.8 118v109.9c0 8.3-6.7 15-15 15H124.6c-9.1 0-16.1-8-14.8-17.1l7-109.9c1-7.4 7.4-12.9 14.8-12.9h148.2c8.3.1 15 6.8 15 15z"
          fill="#fabe2c"
          id="bag_2"
          className={`cart__bags ${items >= 2 && "cart__bags--active"}`}
        />
        <g
          id="bag_1"
          className={`cart__bags ${items >= 1 && "cart__bags--active"}`}
        >
          <path
            d="M383.6 217.2c.2 4.1-1.3 8.1-4.1 11.1s-6.8 4.7-10.9 4.7H220.9c-4.1 0-8-1.7-10.9-4.7-2.8-3-4.3-7-4.1-11.1l3-59.9c.4-8 7-14.2 15-14.2h141.8c8 0 14.6 6.3 15 14.2l2.9 59.9z"
            fill="#4793ff"
          />
          <path
            d="M383.6 217.2c.2 4.1-1.3 8.1-4.1 11.1s-6.8 4.7-10.9 4.7h-73.9v-90h70.9c8 0 14.6 6.3 15 14.2l3 60z"
            fill="#4756ff"
          />
        </g>
        <path
          d="M372.5 512c24.8 0 44.9-20.1 44.9-44.9 0-24.8-20.1-44.9-44.9-44.9-24.8 0-44.9 20.1-44.9 44.9-.1 24.8 20.1 44.9 44.9 44.9z"
          fill="#29376d"
        />
        <path
          d="M212.9 512c24.8 0 44.9-20.1 44.9-44.9 0-24.8-20.1-44.9-44.9-44.9s-44.9 20-44.9 44.9c0 24.8 20.1 44.9 44.9 44.9z"
          fill="#47568c"
        />
        <path
          d="M465 221.7l-26.2 90.5c-7 29.4-33.1 50-63.3 50H156.6c-7.3-29.8-27.8-100.7-42.6-159.2h336.5c4.6 0 9 2.1 11.9 5.8 2.8 3.6 3.8 8.4 2.6 12.9z"
          fill="#dfe7f4"
        />
        <path
          d="M465 221.7l-26.2 90.5c-7 29.4-33.1 50-63.3 50h-80.8V202.9h155.8c4.6 0 9 2.1 11.9 5.8 2.8 3.7 3.8 8.5 2.6 13z"
          fill="#b6c0d1"
        />
        <path
          d="M212.9 482.1c8.3 0 15-6.7 15-15s-6.7-15-15-15-15 6.7-15 15 6.8 15 15 15z"
          fill="#f0f7ff"
        />
        <path
          d="M372.5 482.1c8.3 0 15-6.7 15-15s-6.7-15-15-15-15 6.7-15 15 6.7 15 15 15z"
          fill="#dfe7f4"
        />
        <path
          d="M425.6 407.1c0 8.3-6.7 15-15 15H195.9c-27 0-50.2-18.3-56.4-44.6-5.2-18.2-3.2-11.4-61.2-242.9-1.7-6.6-7.6-11.2-14.4-11.2H15.4c-8.3 0-15-6.7-15-15s6.7-15 15-15h48.5c20.5 0 38.4 13.9 43.5 33.8 0 0 7.2 28.3 16.7 65.8 14.8 58.6 35.3 139.4 42.6 169.2.9 3.6 1.6 6.4 2 8.4 3 12.7 14.2 21.6 27.3 21.6h214.7c8.2-.1 14.9 6.7 14.9 14.9z"
          fill="#47568c"
        />
        <path
          d="M425.6 407.1c0 8.3-6.7 15-15 15H294.8v-30h115.8c8.3 0 15 6.8 15 15z"
          fill="#29376d"
        />
      </svg>

      {items > 0 && <span className={"cart__count"}>{items}</span>}
    </>
  );
};

ReactDOM.render(
  <React.StrictMode>
    <Cart />
  </React.StrictMode>,
  document.getElementById("cart")
);
